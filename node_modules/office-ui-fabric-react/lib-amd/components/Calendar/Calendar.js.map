{"version":3,"sources":["components/Calendar/Calendar.tsx"],"names":[],"mappings":"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","file":"components/Calendar/Calendar.js","sourcesContent":["import * as React from 'react';\r\nimport { ICalendar, ICalendarProps, ICalendarIconStrings } from './Calendar.Props';\r\nimport { DayOfWeek, DateRangeType } from '../../utilities/dateValues/DateValues';\r\nimport { CalendarDay } from './CalendarDay';\r\nimport { CalendarMonth } from './CalendarMonth';\r\nimport { compareDates } from '../../utilities/dateMath/DateMath';\r\nimport {\r\n  autobind,\r\n  css,\r\n  BaseComponent,\r\n  KeyCodes\r\n} from '../../Utilities';\r\nimport * as stylesImport from './Calendar.scss';\r\nconst styles: any = stylesImport;\r\n\r\nconst leftArrow: string = 'ChevronLeft';\r\nconst rightArrow: string = 'ChevronRight';\r\nlet iconStrings: ICalendarIconStrings = {\r\n  leftNavigation: leftArrow,\r\n  rightNavigation: rightArrow\r\n};\r\n\r\nexport interface ICalendarState {\r\n  /** The currently focused date in the calendar, but not necessarily selected */\r\n  navigatedDate?: Date;\r\n\r\n  /** The currently selected date in the calendar */\r\n  selectedDate?: Date;\r\n}\r\n\r\nexport class Calendar extends BaseComponent<ICalendarProps, ICalendarState> implements ICalendar {\r\n  public static defaultProps: ICalendarProps = {\r\n    onSelectDate: undefined,\r\n    onDismiss: undefined,\r\n    isMonthPickerVisible: true,\r\n    isDayPickerVisible: true,\r\n    value: undefined,\r\n    today: new Date(),\r\n    firstDayOfWeek: DayOfWeek.Sunday,\r\n    dateRangeType: DateRangeType.Day,\r\n    autoNavigateOnSelection: false,\r\n    showGoToToday: true,\r\n    strings: null,\r\n    highlightCurrentMonth: false,\r\n    navigationIcons: iconStrings\r\n  };\r\n\r\n  public refs: {\r\n    [key: string]: React.ReactInstance;\r\n    root: HTMLElement;\r\n    dayPicker: CalendarDay;\r\n    monthPicker: CalendarMonth;\r\n  };\r\n\r\n  private _focusOnUpdate: boolean;\r\n\r\n  constructor(props: ICalendarProps) {\r\n    super();\r\n\r\n    let currentDate = props.value && !isNaN(props.value.getTime()) ? props.value : (props.today || new Date());\r\n    this.state = {\r\n      selectedDate: currentDate,\r\n      navigatedDate: currentDate\r\n    };\r\n\r\n    this._focusOnUpdate = false;\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: ICalendarProps) {\r\n    let { autoNavigateOnSelection, value, today = new Date() } = nextProps;\r\n\r\n    // Make sure auto-navigation is supported for programmatic changes to selected date, i.e.,\r\n    // if selected date is updated via props, we may need to modify the navigated date\r\n    let overrideNavigatedDate = (autoNavigateOnSelection && !compareDates(value!, this.props.value!));\r\n    if (overrideNavigatedDate) {\r\n      this.setState({\r\n        navigatedDate: value\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      selectedDate: value || today\r\n    });\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    if (this._focusOnUpdate) {\r\n      // if the day picker is shown, focus on it\r\n      if (this.refs.dayPicker) {\r\n        this.refs.dayPicker.focus();\r\n      } else if (this.refs.monthPicker) {\r\n        this.refs.monthPicker.focus();\r\n      }\r\n      this._focusOnUpdate = false;\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let rootClass = 'ms-DatePicker';\r\n    let { firstDayOfWeek, dateRangeType, strings, isMonthPickerVisible, isDayPickerVisible, autoNavigateOnSelection, showGoToToday, highlightCurrentMonth, navigationIcons } = this.props;\r\n    let { selectedDate, navigatedDate } = this.state;\r\n\r\n    return (\r\n      <div className={ css(rootClass, styles.root) } ref='root' role='application'>\r\n        <div className={ css(\r\n          'ms-DatePicker-picker ms-DatePicker-picker--opened ms-DatePicker-picker--focused',\r\n          styles.picker,\r\n          styles.pickerIsOpened,\r\n          styles.pickerIsFocused,\r\n          isMonthPickerVisible && isDayPickerVisible && ('is-monthPickerVisible ' + styles.pickerIsMonthPickerVisible),\r\n          isMonthPickerVisible && !isDayPickerVisible && ('is-onlymonthPickerVisible ' + styles.pickerOnlyMonthPickerVisible)\r\n        ) } >\r\n          <div className={ css('ms-DatePicker-holder ms-slideDownIn10', styles.holder) } onKeyDown={ this._onDatePickerPopupKeyDown }>\r\n            <div className={ css('ms-DatePicker-frame', styles.frame) }>\r\n              <div className={ css('ms-DatePicker-wrap', styles.wrap) }>\r\n                { isDayPickerVisible && <CalendarDay\r\n                  selectedDate={ selectedDate! }\r\n                  navigatedDate={ navigatedDate! }\r\n                  today={ this.props.today }\r\n                  onSelectDate={ this._onSelectDate }\r\n                  onNavigateDate={ this._onNavigateDate }\r\n                  onDismiss={ this.props.onDismiss }\r\n                  firstDayOfWeek={ firstDayOfWeek! }\r\n                  dateRangeType={ dateRangeType! }\r\n                  autoNavigateOnSelection={ autoNavigateOnSelection! }\r\n                  strings={ strings! }\r\n                  navigationIcons={ navigationIcons! }\r\n                  ref='dayPicker' />\r\n                }\r\n\r\n                { isMonthPickerVisible && <CalendarMonth\r\n                  navigatedDate={ navigatedDate! }\r\n                  strings={ strings! }\r\n                  onNavigateDate={ this._onNavigateDate }\r\n                  today={ this.props.today }\r\n                  highlightCurrentMonth={ highlightCurrentMonth! }\r\n                  navigationIcons={ navigationIcons! }\r\n                  ref='monthPicker' /> }\r\n\r\n                { showGoToToday &&\r\n                  <span\r\n                    role='button'\r\n                    className={ css('ms-DatePicker-goToday js-goToday', styles.goToday) }\r\n                    onClick={ this._onGotoToday }\r\n                    onKeyDown={ this._onGotoTodayKeyDown }\r\n                    tabIndex={ 0 }>\r\n                    { strings!.goToToday }\r\n                  </span>\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public focus() {\r\n    if (this.refs.dayPicker) {\r\n      this.refs.dayPicker.focus();\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _navigateDay(date: Date) {\r\n    this.setState({\r\n      navigatedDate: date\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onNavigateDate(date: Date, focusOnNavigatedDay: boolean) {\r\n    if (this.props.isDayPickerVisible) {\r\n      this._navigateDay(date);\r\n      this._focusOnUpdate = focusOnNavigatedDay;\r\n    } else {\r\n      // if only the month picker is shown, select the chosen month\r\n      this._onSelectDate(date);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onSelectDate(date: Date, selectedDateRangeArray?: Date[]) {\r\n    let { onSelectDate } = this.props;\r\n\r\n    this.setState({\r\n      selectedDate: date\r\n    });\r\n\r\n    if (onSelectDate) {\r\n      onSelectDate(date, selectedDateRangeArray);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onGotoToday() {\r\n    this._navigateDay(this.props.today!);\r\n    this._focusOnUpdate = true;\r\n  }\r\n\r\n  @autobind\r\n  private _onGotoTodayKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\r\n    if (ev.which === KeyCodes.enter || ev.which === KeyCodes.space) {\r\n      ev.preventDefault();\r\n      this._onGotoToday();\r\n    } else if (ev.which === KeyCodes.tab && !ev.shiftKey) {\r\n      if (this.props.onDismiss) {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        this.props.onDismiss();\r\n      }\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onDatePickerPopupKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\r\n    switch (ev.which) {\r\n      case KeyCodes.enter:\r\n        ev.preventDefault();\r\n        break;\r\n\r\n      case KeyCodes.backspace:\r\n        ev.preventDefault();\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        this._handleEscKey(ev);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _handleEscKey(ev: React.KeyboardEvent<HTMLElement>) {\r\n    if (this.props.onDismiss != null) {\r\n      this.props.onDismiss();\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}