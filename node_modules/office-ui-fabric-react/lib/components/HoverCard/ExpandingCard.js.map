{"version":3,"sources":["components/HoverCard/ExpandingCard.tsx"],"names":[],"mappings":";;;AAAA,uCAAuC;AACvC,6BAA+B;AAC/B,sCAAsC;AACtC,6CAQyB;AACzB,6DAAqG;AACrG,yCAAkD;AAClD,gEAA+D;AAC/D,yCAAiE;AAEjE,+DAAmD;AAQnD;IAAmC,yCAAuD;IAUxF,uBAAY,KAA0B;QAAtC,YACE,kBAAM,KAAK,CAAC,SAMb;QAJC,KAAI,CAAC,KAAK,GAAG;YACX,kBAAkB,EAAE,KAAK;YACzB,WAAW,EAAE,KAAK;SACnB,CAAC;;IACJ,CAAC;IAEM,yCAAiB,GAAxB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,YAAY,IAAK,IAAI,CAAC,KAAK,CAAC,kBAA6B,CAAC,CAAC,CAAC;YACvG,IAAI,CAAC,QAAQ,CAAC;gBACZ,WAAW,EAAE,IAAI;aAClB,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAEM,4CAAoB,GAA3B;QACE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAEM,8BAAM,GAAb;QACQ,IAAA,eASQ,EARZ,gCAAa,EACb,UAAE,EACF,gBAAK,EACL,wBAAoB,EACpB,4CAAmB,EACnB,8CAAoB,EACpB,wCAAiB,EACjB,0CAAkB,CACL;QACf,IAAI,CAAC,OAAO,GAAG,gCAAS,CAAC,KAAM,EAAE,YAAY,CAAC,CAAC;QAE/C,MAAM,CAAC,CACL,oBAAC,iBAAO,uBACD,0BAAc,CAAC,IAAI,CAAC,KAAK,EAAE,yBAAa,CAAC,IAC9C,YAAY,EAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAC3C,SAAS,EAAG,eAAG,CACb,6BAAmB,CAAC,YAAY,EAChC,IAAI,CAAC,OAAO,CAAC,IAAI,CAClB,EACD,aAAa,EAAG,aAAa,EAC7B,aAAa,EAAG,KAAK,EACrB,eAAe,EAAG,kBAAM,EAAE,GAAG,iCAAe,CAAC,eAAe,GAAG,iCAAe,CAAC,cAAc,EAC7F,oBAAoB,EAAG,IAAI,EAC3B,WAAW,EAAG,iBAAkB,GAAG,kBAAmB,EACtD,cAAc,EAAG,EAAE;YAEnB,6BACE,cAAc,EAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EACnC,aAAa,EAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EAClC,YAAY,EAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EACjC,YAAY,EAAG,IAAI,CAAC,KAAK,CAAC,OAAO;gBAE/B,IAAI,CAAC,oBAAoB,EAAE;gBAC3B,IAAI,CAAC,qBAAqB,EAAE,CAC1B,CACG,CACZ,CAAC;IACJ,CAAC;IAGO,4CAAoB,GAA5B;QACE,MAAM,CAAC,CACL,6BAAK,SAAS,EAAG,qBAAW,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,IAAI,EAAE,CAAW,IAC7G,IAAI,CAAC,KAAK,CAAC,mBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CACpD,CACP,CAAC;IACJ,CAAC;IAGO,6CAAqB,GAA7B;QADA,iBAuBC;QArBC,sFAAsF;QACtF,yHAAyH;QACzH,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC;YAChC,KAAI,CAAC,QAAQ,CAAC;gBACZ,kBAAkB,EAAE,IAAI;aACzB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,CACL,6BAAK,SAAS,EAAG,qBAAW,CAC1B,IAAI,CAAC,OAAO,CAAC,YAAY,EACzB,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,uCAAiB,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,kBAAkB,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,IAAI,EAAE,EACnI,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE,CACzC,EACT,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC;YAEvC,6BAAK,SAAS,EAAG,IAAI,CAAC,OAAO,CAAC,kBAA4B,IACtD,IAAI,CAAC,KAAK,CAAC,oBAAoB,IAAI,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CACvF,CACF,CACP,CAAC;IACJ,CAAC;IAGO,yCAAiB,GAAzB;QADA,iBAWC;QATC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC;gBAChC,EAAE,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,YAAY,IAAI,KAAI,CAAC,KAAK,CAAC,kBAAmB,CAAC,CAAC,CAAC;oBACtE,KAAI,CAAC,QAAQ,CAAC;wBACZ,WAAW,EAAE,IAAI;qBAClB,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IApHa,0BAAY,GAAG;QAC3B,iBAAiB,EAAE,GAAG;QACtB,kBAAkB,EAAE,GAAG;KACxB,CAAC;IAqEF;QADC,oBAAQ;6DAOR;IAGD;QADC,oBAAQ;8DAuBR;IAGD;QADC,oBAAQ;0DAWR;IArHU,aAAa;QADzB,wBAAY,CAAC,CAAC,OAAO,CAAC,CAAC;OACX,aAAa,CAsHzB;IAAD,oBAAC;CAtHD,AAsHC,CAtHkC,yBAAa,GAsH/C;AAtHY,sCAAa","file":"components/HoverCard/ExpandingCard.js","sourcesContent":["/* tslint:disable:no-unused-variable */\r\nimport * as React from 'react';\r\n/* tslint:enable:no-unused-variable */\r\nimport {\r\n  BaseComponent,\r\n  css,\r\n  getNativeProps,\r\n  divProperties,\r\n  customizable,\r\n  autobind,\r\n  getRTL\r\n} from '../../Utilities';\r\nimport { IExpandingCardProps, IExpandingCardStyles, ExpandingCardMode } from './ExpandingCard.Props';\r\nimport { Callout, ICallout } from '../../Callout';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport { AnimationClassNames, mergeStyles } from '../../Styling';\r\n\r\nimport { getStyles } from './ExpandingCard.styles';\r\n\r\nexport interface IExpandingCardState {\r\n  firstFrameRendered: boolean;\r\n  needsScroll: boolean;\r\n}\r\n\r\n@customizable(['theme'])\r\nexport class ExpandingCard extends BaseComponent<IExpandingCardProps, IExpandingCardState> {\r\n  public static defaultProps = {\r\n    compactCardHeight: 156,\r\n    expandedCardHeight: 384\r\n  };\r\n\r\n  private _styles: IExpandingCardStyles;\r\n  private _callout: ICallout;\r\n  private _expandedElem: HTMLDivElement;\r\n\r\n  constructor(props: IExpandingCardProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      firstFrameRendered: false,\r\n      needsScroll: false\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    if (this._expandedElem && this._expandedElem.scrollHeight >= (this.props.expandedCardHeight as number)) {\r\n      this.setState({\r\n        needsScroll: true\r\n      });\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this._async.dispose();\r\n  }\r\n\r\n  public render() {\r\n    const {\r\n      targetElement,\r\n      id,\r\n      theme,\r\n      styles: customStyles,\r\n      onRenderCompactCard,\r\n      onRenderExpandedCard,\r\n      compactCardHeight,\r\n      expandedCardHeight\r\n    } = this.props;\r\n    this._styles = getStyles(theme!, customStyles);\r\n\r\n    return (\r\n      <Callout\r\n        { ...getNativeProps(this.props, divProperties) }\r\n        componentRef={ this._resolveRef('_callout') }\r\n        className={ css(\r\n          AnimationClassNames.scaleUpIn100,\r\n          this._styles.root\r\n        ) }\r\n        targetElement={ targetElement }\r\n        isBeakVisible={ false }\r\n        directionalHint={ getRTL() ? DirectionalHint.bottomRightEdge : DirectionalHint.bottomLeftEdge }\r\n        directionalHintFixed={ true }\r\n        finalHeight={ compactCardHeight! + expandedCardHeight! }\r\n        minPagePadding={ 24 }\r\n      >\r\n        <div\r\n          onFocusCapture={ this.props.onEnter }\r\n          onBlurCapture={ this.props.onLeave }\r\n          onMouseEnter={ this.props.onEnter }\r\n          onMouseLeave={ this.props.onLeave }\r\n        >\r\n          { this._onRenderCompactCard() }\r\n          { this._onRenderExpandedCard() }\r\n        </div>\r\n      </Callout >\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onRenderCompactCard(): JSX.Element {\r\n    return (\r\n      <div className={ mergeStyles(this._styles.compactCard, { height: this.props.compactCardHeight + 'px' }) as string }>\r\n        { this.props.onRenderCompactCard!(this.props.renderData) }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onRenderExpandedCard(): JSX.Element {\r\n    // firstFrameRendered helps in initially setting height of expanded card to 0, even if\r\n    // mode prop is set to ExpandingCardMode.expanded on first render. This is to make sure transition animation takes place.\r\n    this._async.requestAnimationFrame(() => {\r\n      this.setState({\r\n        firstFrameRendered: true\r\n      });\r\n    });\r\n\r\n    return (\r\n      <div className={ mergeStyles(\r\n        this._styles.expandedCard,\r\n        this.props.mode === ExpandingCardMode.expanded && this.state.firstFrameRendered && { height: this.props.expandedCardHeight + 'px' },\r\n        this.state.needsScroll && { 'overflow-y': 'auto' }\r\n      ) as string }\r\n        ref={ this._resolveRef('_expandedElem') }\r\n      >\r\n        <div className={ this._styles.expandedCardScroll as string }>\r\n          { this.props.onRenderExpandedCard && this.props.onRenderExpandedCard(this.props.renderData) }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _checkNeedsScroll(): void {\r\n    if (this._expandedElem) {\r\n      this._async.requestAnimationFrame(() => {\r\n        if (this._expandedElem.scrollHeight >= this.props.expandedCardHeight!) {\r\n          this.setState({\r\n            needsScroll: true\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}