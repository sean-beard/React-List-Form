{"version":3,"file":"autobind.js","sourceRoot":"../src/","sources":["autobind.ts"],"names":[],"mappings":";;AAAA;;;GAGG;AACH,kBAA6C,MAAW,EAAE,GAAW,EAAE,UAAsC;IAK3G,IAAI,EAAE,GAAG,UAAU,CAAC,KAAK,CAAC;IAE1B,IAAI,QAAQ,GAAG,KAAK,CAAC;IAErB,MAAM,CAAC;QACL,YAAY,EAAE,IAAI;QAElB,GAAG,EAAH;YACE,EAAE,CAAC,CAAC,QAAQ,IAAI,CAAC,EAAE,IAAI,IAAI,KAAK,EAAE,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1E,MAAM,CAAC,EAAO,CAAC;YACjB,CAAC;YAED,uFAAuF;YACvF,IAAI,OAAO,GAAG,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAElC,QAAQ,GAAG,IAAI,CAAC;YAChB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE;gBAC/B,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;gBACd,UAAU,EAAE,IAAI;gBAChB,KAAK,EAAE,OAAO;aACf,CAAC,CAAC;YACH,QAAQ,GAAG,KAAK,CAAC;YAEjB,MAAM,CAAC,OAAO,CAAC;QACjB,CAAC;QAED,GAAG,EAAH,UAAI,QAAa;YACf,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE;gBAC/B,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;gBACd,UAAU,EAAE,IAAI;gBAChB,KAAK,EAAE,QAAQ;aAChB,CAAC,CAAC;QACL,CAAC;KACF,CAAC;AACJ,CAAC;AAzCD,4BAyCC","sourcesContent":["/**\r\n * Autobind is a utility for binding methods in a class. This simplifies tagging methods as being \"bound\" to the this pointer\r\n * so that they can be used in scenarios that simply require a function callback.\r\n */\r\nexport function autobind<T extends Function>(target: any, key: string, descriptor: TypedPropertyDescriptor<T>): {\r\n  configurable: boolean;\r\n  get(): T;\r\n  set(newValue: any): void;\r\n} | void {\r\n  let fn = descriptor.value;\r\n\r\n  let defining = false;\r\n\r\n  return {\r\n    configurable: true,\r\n\r\n    get(): T {\r\n      if (defining || (fn && this === fn.prototype) || this.hasOwnProperty(key)) {\r\n        return fn as T;\r\n      }\r\n\r\n      // Bind method only once, and update the property to return the bound value from now on\r\n      let fnBound = fn && fn.bind(this);\r\n\r\n      defining = true;\r\n      Object.defineProperty(this, key, {\r\n        configurable: true,\r\n        writable: true,\r\n        enumerable: true,\r\n        value: fnBound\r\n      });\r\n      defining = false;\r\n\r\n      return fnBound;\r\n    },\r\n\r\n    set(newValue: any): void {\r\n      Object.defineProperty(this, key, {\r\n        configurable: true,\r\n        writable: true,\r\n        enumerable: true,\r\n        value: newValue\r\n      });\r\n    }\r\n  };\r\n}\r\n"]}